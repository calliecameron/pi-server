- ansible.builtin.include_role:
    name: pi_server.base

- name: install avahi
  become: yes
  ansible.builtin.package:
    name: avahi-daemon
    state: present

- name: config
  become: yes
  ansible.builtin.copy:
    src: avahi.conf
    dest: /etc/avahi/avahi-daemon.conf
    owner: root
    group: root
    mode: a=r

- name: firewall
  ansible.builtin.include_role:
    name: pi_server.apps.firewall.udp_port
  vars:
    port: "{{ pi_server_apps_avahi_port }}"

- name: monitoring
  ansible.builtin.include_role:
    name: pi_server.apps.monitoring.monitor_systemd_service
  vars:
    systemd_service: avahi-daemon
